{% extends 'base.html' %}
{% load static %}
{% block links %}
<script src="{% static 'js/private.js' %}" crossorigin="anonymous"></script>
{% endblock links %}
{% block content %}
    {{user.nickname|json_script:"user-nickname"}}
    <div class="hh-container">
        <br><br><br>
        <h1>
            {{nickname}}'s bucket list
        </h1>
        <br><br>
        <div class="category-container container">
            <!-- <form action="" method="get"> -->
            <!-- <div data-toggle="buttons"> -->
                <label class="btn btn-primary" for="btn-check">
                    <input class="btn-check" type="checkbox" autocomplete="off">하고 싶은 것
                </label>
                <label class="btn btn-primary">
                    <input type="checkbox" autocomplete="off">먹고 싶은 것
                </label>
                <label class="btn btn-primary">
                    <input type="checkbox" autocomplete="off">갖고 싶은 것
                </label>
                <label class="btn btn-primary">
                    <input type="checkbox" autocomplete="off">가고 싶은 곳
                </label>
                <label class="btn btn-primary">
                    <input type="checkbox" autocomplete="off">여행
                </label>
                <label class="btn btn-primary">
                    <input type="checkbox" autocomplete="off">취미
                </label>
                <label class="btn btn-primary">
                    <input type="checkbox" autocomplete="off">기타
                </label>

                <input type="checkbox" class="btn-check" id="btn-check-1" checked autocomplete="off">
                <label class="btn btn-primary" for="btn-check-1">Checked</label>
                <input type="checkbox" class="btn-check" id="btn-check-2" checked autocomplete="off">
                <label class="btn btn-primary" for="btn-check-2">Checked</label>
                <input type="checkbox" class="btn-check" id="btn-check-2" checked autocomplete="off">
                <label class="btn btn-primary" for="btn-check-2">Checked</label>
                <input type="checkbox" class="btn-check" id="btn-check-2" checked autocomplete="off">
                <label class="btn btn-primary" for="btn-check-2">Checked</label>
                <input type="checkbox" class="btn-check" id="btn-check-2" checked autocomplete="off">
                <label class="btn btn-primary" for="btn-check-2">Checked</label>
                <input type="checkbox" class="btn-check" id="btn-check-2" checked autocomplete="off">
                <label class="btn btn-primary" for="btn-check-2">Checked</label>

                <!-- <button class="btn btn-primary activate" type="checkbox" name="category" id="want-to-do" value="1">하고 싶은 것</button>
                <button class="btn btn-primary activate" type="checkbox" name="category" id="want-to-eat" value="2">먹고 싶은 것</button>
                <button class="btn btn-primary activate" type="checkbox" name="category" id="want-to-have" value="3">갖고 싶은 것</button>
                <button class="btn btn-primary activate" type="checkbox" name="category" id="want-to-go" value="4">가고 싶은 곳</button>
                <button class="btn btn-primary activate" type="checkbox" name="category" id="travel" value="5">여행</button>
                <button class="btn btn-primary activate" type="checkbox" name="category" id="hobby" value="6">취미</button> -->
            <!-- </div> -->
            <!-- </form> -->
        </div>
        <br><br>
        <h2>고정된 버킷</h2>
        <br><br>
        <div id="show top_fixed container">
            {% for ordered_record in ordered_records %}
                {% if ordered_record.top_fixed is True %}
                    <h4><a href="{% url 'bucketprocess' ordered_record.id %}">{{ordered_record.title}}</a></h4>
                    <h4>{{ordered_record.category}}</h4>
                    <h4>{{ordered_record.createdAt}}</h4>
                    <br><br>
                {% endif %}
            {% endfor %}
        </div>

        <br><br>
        {% for bucket in buckets %}
        <!-- hide & show / div 감싸고-->
        <div id="bucket{{bucket.id}}">
            <h4><a id="bucket-title" href="{% url 'bucketprocess' bucket.id %}">{{bucket.title}}</a></h4>
            <h4 id="bucket-category" value="{{bucket.category}}">{{bucket.category_to_str}}</h4> 
            <!-- id주고 -->
            <h4>{{bucket.createdAt}}</h4>

            <div>
                <div class="hh-btn-space">
                {% if user in bucket.liked_users.all %}
                    <button id="btn-like{{bucket.id}}" class="hh-btn-like" value="{{bucket.id}}">
                        <img src="{% static 'image/like_fill.svg' %}" alt="♥">
                    </button>
                {% else %}
                    <button id="btn-like{{bucket.id}}" class="hh-btn-like" value="{{bucket.id}}">
                        <img src="{% static 'image/like.svg' %}" alt="♡">
                    </button>
                {% endif %}
                    <label for="btn-like{{bucket.id}}">{{ bucket.liked_users.count }}</label>
                </div>
                <div class="hh-btn-space">
                {% if user != bucket.user %}
                {% if bucket.id in user_scraps.all %}
                    <button id="btn-scrap{{bucket.id}}" class="hh-btn-scrap" value="{{bucket.id}}">
                        <img src="{% static 'image/bookmark_fill.svg' %}" alt="퍼가기 취소">
                    </button>
                {% else %}
                    <button id="btn-scrap{{bucket.id}}" class="hh-btn-scrap" value="{{bucket.id}}">
                        <img src="{% static 'image/bookmark.svg' %}" alt="퍼가기">
                    </button>
                {% endif %}
                {% else %}
                    <span id="btn-scrap{{bucket.id}}">
                        <img src="{% static 'image/bookmark_me.svg' %}" alt="나의버킷퍼간수">
                    </span>
                {% endif %}
                    <label for="btn-scrap{{bucket.id}}">{{ bucket.deriving_bucket.all.count }}</label>
                </div>
            </div>
            <p class="description-username">{{ bucket.referenced_users.count }}</p>

            <h4><a href="{% url 'delete' user.nickname bucket.id %}">DELETE</a></h4>
            <h4><a href="{% url 'edit' user.nickname bucket.id %}">EDIT</a></h4>
            
            {% if bucket.top_fixed is True %}
                <button id="btn_fix{{bucket.id}}" onclick="click_fix('{{bucket.id}}', '{{user.nickname}}')">★</button>
            {% else %}
                <button id="btn_fix{{bucket.id}}" onclick="click_fix('{{bucket.id}}', '{{user.nickname}}')">☆</button>
            {% endif %}
            <br><br><br>
        </div>
        {% endfor %}
    </div>
    <a href="{% url 'create' user.nickname %}">go to create bucket</a>

{% endblock %} 